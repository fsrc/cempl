# cempl
Javascript functional templating engine, best in use with Coffee-Script. Should be portable to work in browser.

It’s more of a generator. It doesn’t parse the template. It executes it. It's written in Coffee-Script, but pre compiled so it only depends on lodash.

# Installation

``` bash
npm install --save cempl
```

# Usage

``` coffeescript
document = require('../index')

# Define a component that can be reused
standardHeader = (title) ->
  @head ->
    # HTML tag attributes is passed on as objects
    @meta 'charset':'utf-8'
    @meta 'X-UA-Compatible':'IE=edge'
    @meta 'Content-Language':'en'
    # Variables is of course possible to use
    @title title

# Wrap any construct in a component and put
# the children where they belong
wrapperFeature = (children) ->
  @div class:'container', ->
    @div class:'row', ->
      @div class:'col-md-12', children

raw = document ->
  # Register a component as a tag
  @register 'wrapper', wrapperFeature
  # Note, tags with no arguments must have empty parenthesis
  # otherwise they will not be executed
  @doctype()
  @html ->
    # @apply makes it possible to build components
    @apply standardHeader, 'My Title'
    @body ->
      # it's possible to pass children on to a component
      # also possible to call a registered component
      @wrapper ->
        # Uses the @text function to insert inner html
        @div -> @text "Hello"
        # Passes the inner html as argument
        @div "World"
      @script type:'javascript', ->
        # This code will be converted into javascript
        # and passed on to the client
        console.log('my javascript')

# eval evaluates the tree and returns the html as string
raw = raw.eval()
console.log(raw)
```

Outputs

``` html
<!DOCTYPE html><html><head><meta charset=’utf-8’></meta><meta X-UA-Compatible=’IE=edge’></meta><meta Content-Language=’en’></meta><title>My Title</title></head><body><div class=’container’><div class=’row’><div class=’col-md-12’><div>Hello</div><div>World</div></div></div></div><script type=’javascript’>console.log(‘my javascript’);</script></body></html>
```

Slightly older example in Javascript. It's generated by Coffee-Script so it might become more beautiful if handwritten.

``` javascript
// Generated by CoffeeScript 1.10.0
var document, raw, standardHeader, wrapperFeature;

document = require('cempl');

standardHeader = function(title) {
  return this.head(function() {
    this.meta({
      'charset': 'utf-8'
    });
    this.meta({
      'X-UA-Compatible': 'IE=edge'
    });
    this.meta({
      'Content-Language': 'en'
    });
    return this.title(title);
  });
};

wrapperFeature = function(children) {
  return this.div({
    "class": 'container'
  }, function() {
    return this.div({
      "class": 'row'
    }, function() {
      return this.div({
        "class": 'col-md-12'
      }, children);
    });
  });
};

raw = document(function() {
  this.doctype();
  return this.html(function() {
    this.apply(standardHeader, 'My Title');
    return this.body(function() {
      this.apply(wrapperFeature, function() {
        this.div(function() {
          return this.text("Hello");
        });
        return this.div("World");
      });
      return this.script({
        type: 'javascript'
      }, function() {
        return console.log('my javascript');
      });
    });
  });
});

console.log(raw["eval"]());
```


Built in tags: 

```
  'DOCTYPE', 'a', 'abbr', 'acronym', 'efines ', 'address', 'applet',
  'efines ', 'area', 'article', 'aside', 'audio', 'b', 'base', 'basefont',
  'pecifies ', 'bdi', 'bdo', 'big', 'efines ', 'blockquote', 'body', 'br',
  'button', 'canvas', 'caption', 'center', 'efines ', 'cite', 'code',
  'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog',
  'dir', 'efines ', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset',
  'figcaption', 'figure', 'font', 'efines ', 'footer', 'form', 'frame',
  'efines ', 'frameset', 'efines ',  'head', 'header', 'hr', 'html',
  'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label',
  'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem',
  'meta', 'meter', 'nav', 'noframes', 'efines ', 'noscript', 'object',
  'ol', 'optgroup', 'option', 'output', 'p', 'param', 'pre', 'progress',
  'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select',
  'small', 'source', 'span', 'strike', 'efines ', 'strong', 'style',
  'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot',
  'th', 'thead', 'time', 'title', 'tr', 'track', 'tt', 'efines', 'u',
  'ul', 'var', 'video', 'wbr', 'h1','h2','h3','h4','h5’
```

List taken from http://www.tutorialspoint.com/html5/html5_tags.htm

If you are missing any tag you can always use the tag function

``` coffeescript
raw = html(->
  @body(->
    @tag('my-own-tag')))
```

# Versioning
## 0.0.7
Added @register

## 0.0.6
 * Commented the source
 * Moved elements list into main file for easier portability to client side (browser)
 * Added features to script-tag. Now you can combine attributes with content.
 * Removed default outer html tag and added doctype. Now you need to define html tag manually.

## 0.0.5
Added default tags h2 to h5 in list

## 0.0.4
Corrected bug in script-tag.

## 0.0.3
Script-tag is now an exception to the general rule of tags. It can be used either as a regular tag passing arguments. Or it can take a function. The function will be stringified and unwrapped. It will then be put inside the script tag.

# Todo
Same thing for CSS
